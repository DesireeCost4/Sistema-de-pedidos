<link rel="stylesheet" href="/css/index.css" />

<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRfJJ0s1d9aE2BdxfZJwV+pbJZi0a1yt5AC9ONaC1"
  crossorigin="anonymous"
/>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoS6lK3WW0Dbs37i8m0Qc1SkpJejDye0WAuH8AB4LetmX7z"
  crossorigin="anonymous"
></script>

<div
  id="carouselExampleInterval"
  class="carousel slide"
  data-bs-ride="carousel"
>
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="10000">
      <img
        src="/uploads/capa.png"
        class="d-block w-100 img-fluid"
        alt="Produto 1"
      />
    </div>
  </div>
</div>

<hr />

<div class="card-container">
  {{#each categorias}}
    <div class="card">
      <div class="card-body">
        <img class="imagem-produto" src="{{imagem}}" alt="{{nome}}" />

        <h4>{{nome}}</h4>
        <small>R$ {{preco}}</small>
        <br />

        <form
          action="/admin/adcionarCarrinho/{{nome}}"
          method="post"
          enctype="multipart/form-data"
        >
          <div class="card-body">
            <input type="hidden" name="nome" value="{{nome}}" />
            <input type="hidden" name="preco" value="{{preco}}" />
            <button class="btn btn-success btn-pequeno" type="submit">
              Adicionar ao Carrinho
            </button>
          </div>
        </form>

      </div>
    </div>
  {{else}}
    <p>Nenhuma categoria encontrada.</p>
  {{/each}}
</div>

<div
  id="offCanvas"
  class="offcanvas offcanvas-end"
  tabindex="-1"
  aria-labelledby="offCanvasLabel"
>
  <div class="offcanvas-header">
    <h5 id="offCanvasLabel">Carrinho</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="offcanvas-body">
    <div id="carrinhoConteudo">
      {{#if carrinhoVazio}}
        <p>Seu carrinho está vazio.</p>
      {{else}}
        <ul class="carrinho-lista">
          {{#each carrinho}}
            <li class="produto-card">

              <img
                class="imagem-produto"
                src="{{this.imagem}}"
                alt="{{nome}}"
              />

              <div class="produto-info">
                <span class="produto-nome">{{this.nomeProduto}}</span>
                <span class="produto-preco">R$ {{this.preco}}</span>

                <div class="produto-controle">
                  <a
                    href="/admin?nomeProduto={{this.nomeProduto}}&action=decrementar"
                    class="btn btn-danger btn-quantidade"
                  >-</a>

                  <span class="produto-quantidade">{{this.quantidade}}</span>

                  <a
                    href="/admin?nomeProduto={{this.nomeProduto}}&action=incrementar"
                    class="btn btn-success btn-quantidade"
                  >+</a>
                </div>
              </div>

              <form
                action="/admin/removerCarrinho/{{this.nomeProduto}}"
                method="POST"
                class="d-inline"
              >
                <button type="submit" class="btn btn-danger">Remover</button>
              </form>
            </li>
          {{/each}}
        </ul>
      {{/if}}
    </div>
    <div>
      <strong>Total do Carrinho: R$ {{totalCarrinho}}</strong>
    </div>
    <div class="checkout-form">
      <form action="/admin/enviarCarrinhoWhatsApp" method="POST">
        <div class="form-group">
          <label for="nomeCliente">Nome do Cliente:</label>
          <input type="text" id="nomeCliente" name="nomeCliente" required />
        </div>
        <div class="form-group">
          <label for="endereco">Endereço:</label>
          <input type="text" id="endereco" name="endereco" required />
        </div>
        <div class="form-group">
          <label for="formaPagamento">Forma de Pagamento:</label>
          <select id="formaPagamento" name="formaPagamento" required>
            <option value="Dinheiro">Dinheiro</option>
            <option value="Cartão de Crédito">Cartão de Crédito</option>
            <option value="Cartão de Débito">Cartão de Débito</option>
          </select>
        </div>
        <div class="form-group">
          <label for="troco">Troco para (se necessário):</label>
          <input type="number" id="troco" name="troco" />
        </div>
        <button type="submit" class="btn btn-success">Finalizar pedido</button>
      </form>
    </div>
  </div>
</div>